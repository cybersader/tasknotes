/**
 * Toast Notification - Compact bottom-right indicator
 */

/* Toast container */
.tn-toast {
	position: fixed;
	bottom: 24px;
	right: 24px;
	z-index: var(--layer-notice);

	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px 16px;
	max-width: 360px;

	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--radius-l);
	box-shadow: var(--shadow-l);

	cursor: pointer;
	opacity: 0;
	transform: translateY(20px);
	transition: all 0.3s ease;
}

.tn-toast--visible {
	opacity: 1;
	transform: translateY(0);
}

.tn-toast--hiding {
	opacity: 0;
	transform: translateY(20px);
}

/* Icon */
.tn-toast__icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	flex-shrink: 0;
	background: var(--interactive-accent);
	border-radius: var(--radius-m);
	color: var(--text-on-accent);
}

.tn-toast__icon svg {
	width: 18px;
	height: 18px;
}

/* Content */
.tn-toast__content {
	flex: 1;
	min-width: 0;
}

.tn-toast__message {
	font-size: var(--font-ui-small);
	font-weight: 600;
	color: var(--text-normal);
	line-height: 1.3;
}

.tn-toast__subtitle {
	font-size: var(--font-ui-smaller);
	color: var(--text-muted);
	margin-top: 2px;
}

.tn-toast__overdue {
	color: var(--text-error);
	font-weight: 600;
}

/* Actions */
.tn-toast__actions {
	display: flex;
	align-items: center;
	gap: 4px;
	flex-shrink: 0;
}

.tn-toast__action {
	padding: 6px 12px;
	border-radius: var(--radius-s);
	background: var(--interactive-accent);
	border: none;
	color: var(--text-on-accent);
	font-size: var(--font-ui-smaller);
	font-weight: 500;
	cursor: pointer;
	transition: all 0.15s ease;
}

.tn-toast__action:hover {
	background: var(--interactive-accent-hover);
}

/* Snooze button */
.tn-toast__snooze {
	padding: 4px 8px;
	border-radius: var(--radius-s);
	background: transparent;
	border: 1px solid var(--background-modifier-border);
	color: var(--text-muted);
	font-size: var(--font-ui-smaller);
	cursor: pointer;
	display: flex;
	align-items: center;
	gap: 4px;
	white-space: nowrap;
	transition: all 0.15s ease;
}

.tn-toast__snooze:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.tn-toast__snooze-icon {
	display: flex;
	align-items: center;
}

.tn-toast__snooze-icon svg {
	width: 12px;
	height: 12px;
}

/* Dismiss button — text label, styled like snooze for consistency */
.tn-toast__dismiss {
	padding: 4px 8px;
	border-radius: var(--radius-s);
	background: transparent;
	border: 1px solid var(--background-modifier-border);
	color: var(--text-muted);
	font-size: var(--font-ui-smaller);
	cursor: pointer;
	white-space: nowrap;
	transition: all 0.15s ease;
}

.tn-toast__dismiss:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

/* Status bar notifications badge */
.tn-status-bar-notifications {
	display: flex;
	align-items: center;
	gap: 4px;
	padding: 0 8px;
	cursor: pointer;
	border-radius: var(--radius-s);
	transition: background 0.15s ease;
}

.tn-status-bar-notifications:hover {
	background: var(--background-modifier-hover);
}

.tn-status-bar-notifications__icon {
	display: flex;
	align-items: center;
	color: var(--text-accent);
}

.tn-status-bar-notifications__icon svg {
	width: 14px;
	height: 14px;
}

.tn-status-bar-notifications__count {
	font-size: var(--font-ui-smaller);
	font-weight: 600;
	color: var(--text-accent);
}

/* ============================================
   Enhanced Toast with Expandable Items (Phase 8b)
   ============================================ */

/* Wider toast when showing items */
.tn-toast--with-items {
	max-width: 420px;
	flex-direction: column;
	align-items: stretch;
	gap: 0; /* No gap - items list handles its own margin */
	padding: 0; /* Reset padding, header will have it */
}

/* Header wrapper - contains icon, content, actions. Stays at bottom. */
.tn-toast__header {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px 16px;
	/* This is at the bottom of flex column, stays in place when items expand above */
}

.tn-toast--with-items .tn-toast__icon {
	/* No absolute positioning - let flex handle it */
	position: relative;
	top: auto;
	left: auto;
}

.tn-toast--with-items .tn-toast__content {
	padding-left: 0; /* No extra padding needed now */
}

.tn-toast--with-items .tn-toast__actions {
	/* No border/padding when inside header - keeps it compact */
	padding-top: 0;
	border-top: none;
	margin-top: 0;
}

/* Clickable count toggle in message (e.g., "4 bases ↑") */
.tn-toast__count-toggle {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	padding: 2px 6px;
	margin: -2px 0;
	background: var(--background-secondary);
	border-radius: var(--radius-s);
	cursor: pointer;
	transition: all 0.15s ease;
}

.tn-toast__count-toggle:hover {
	background: var(--background-modifier-hover);
}

.tn-toast__count-toggle--expanded {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.tn-toast__count-toggle--expanded:hover {
	background: var(--interactive-accent-hover);
}

.tn-toast__count-text {
	font-weight: 600;
}

.tn-toast__count-chevron {
	display: inline-flex;
	align-items: center;
	transition: transform 0.2s ease;
}

.tn-toast__count-chevron svg {
	width: 12px;
	height: 12px;
}

.tn-toast__count-toggle--expanded .tn-toast__count-chevron {
	transform: rotate(180deg);
}

/* Items list - positioned above header, expands upward */
.tn-toast__items-list--above {
	/* Already first in DOM, no order needed */
	max-height: 0;
	overflow: hidden;
	padding: 0;
	margin: 0;
	background: var(--background-secondary);
	border-radius: 0; /* No radius - flush with toast edges */
	border-bottom: none;
	transition: max-height 0.3s ease, padding 0.3s ease, border-bottom 0.3s ease;
}

.tn-toast__items-list--above.tn-toast__items-list--expanded {
	max-height: 200px;
	overflow-y: auto;
	padding: 8px 16px;
	border-bottom: 1px solid var(--background-modifier-border);
}

/* Scrollable mode - triggered by clicking "+X more" to show all items */
.tn-toast__items-list--above.tn-toast__items-list--scrollable {
	max-height: 250px;
	overflow-y: auto;
	padding: 8px 16px;
	border-bottom: 1px solid var(--background-modifier-border);
}

/* Combined: expanded + scrollable */
.tn-toast__items-list--above.tn-toast__items-list--expanded.tn-toast__items-list--scrollable {
	max-height: 250px;
}

/* Legacy items list (fallback) */
.tn-toast__items-list:not(.tn-toast__items-list--above) {
	margin-top: 8px;
	padding: 8px;
	background: var(--background-secondary);
	border-radius: var(--radius-s);
	max-height: 200px;
	overflow-y: auto;
}

/* Individual item */
.tn-toast__item {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 6px 4px;
	border-radius: var(--radius-s);
}

.tn-toast__item:not(:last-child) {
	border-bottom: 1px solid var(--background-modifier-border);
}

/* Item icon (urgency indicator) */
.tn-toast__item-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 16px;
	height: 16px;
	flex-shrink: 0;
}

.tn-toast__item-icon svg {
	width: 14px;
	height: 14px;
}

.tn-toast__item-icon--overdue {
	color: var(--text-error);
}

.tn-toast__item-icon--today {
	color: var(--color-green);
}

.tn-toast__item-icon--upcoming {
	color: var(--text-accent);
}

/* Item title - clickable to open */
.tn-toast__item-title {
	flex: 1;
	font-size: var(--font-ui-smaller);
	color: var(--text-normal);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	cursor: pointer;
	transition: color 0.15s ease;
}

.tn-toast__item-title:hover {
	color: var(--text-accent);
	text-decoration: underline;
}

/* Item context (due date / match count) */
.tn-toast__item-context {
	font-size: var(--font-ui-smaller);
	color: var(--text-muted);
	white-space: nowrap;
}

/* Clickable context (e.g., "X items match" for base notifications) */
.tn-toast__item-context--clickable {
	cursor: pointer;
	transition: color 0.15s ease;
}

.tn-toast__item-context--clickable:hover {
	color: var(--text-accent);
	text-decoration: underline;
}

/* "+X more" indicator */
.tn-toast__item--more {
	color: var(--text-muted);
	font-style: italic;
	justify-content: center;
	padding: 8px 4px;
	border-bottom: none;
}

/* "Got it" button - styled like dismiss but with tooltip hint */
.tn-toast__got-it {
	/* Same as dismiss */
}
