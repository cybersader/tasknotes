# TaskNotes 4.4.0

## Added

- [Mdbase](https://mdbase.dev) type generation now includes `tn_role` annotations so external tools can identify each field's role even when frontmatter names are customized
- (#1618) Mdbase type matching now follows your task identification settings (tag or frontmatter property), with fallback to tag matching when needed
  - Thanks to @jimbo108108 for reporting
- Mdbase type status fields now include `tn_completed_values` so external tools can reliably identify which status values count as completed
- (#1576) Added an optional `Checklist Progress` task-card property that renders a compact progress bar and `completed/total` count from top-level markdown checkboxes
  - Uses metadata cache list items and excludes nested checklist entries so progress reflects top-level task steps
  - In Bases views, map `tasks` (`file.tasks`) to `Checklist Progress`
  - Existing `.base` files need `file.tasks` added to the view `order` YAML manually
  - Newly generated `.base` templates now include `file.tasks` in view `order` by default
  - Thanks to @phortx for opening #1576 and for the earlier implementation PR, and @piyushaswani55 for feedback in the issue discussion

## Changed

- Mdbase type generation no longer overwrites `mdbase.yaml` if the file already exists, preserving user customisations
- Webhooks now fire consistently regardless of whether updates come from the UI, HTTP API, or MCP
- Webhook runtime state now syncs automatically when plugin settings change
- Shared HTTP response/body parsing utilities are now consolidated in a dedicated `httpUtils` module
- Release notes now include a reminder on every release page that default generated `.base` template changes never overwrite existing user `.base` files, and that users can regenerate templates from Settings to pick up updates

## Fixed

- (#1608) Fixed task title frontmatter being removed when `storeTitleInFilename` is enabled
  - `title` is now retained in frontmatter while filename derivation from title remains unchanged
  - Thanks to @victoraraujo105 for the PR
- (#1602) Fixed time tracking statistics showing incorrect or zero values for Today/Week/Month due to UTC-anchored date range boundaries in Stats View
  - Updated range calculations to use local calendar-day boundaries consistently
- (#1602) Fixed inconsistent `timeEntries` timestamp formats across create/edit/drag/resize flows
  - Time entry timestamps are now written in canonical UTC ISO format (`toISOString()` with `Z`) across all write paths
- (#1602) Fixed denormalized `timeEntries.duration` drift after edits
  - Time tracking calculations now derive duration from `startTime`/`endTime`
  - Time entry save paths now strip legacy `duration` values instead of persisting them
  - Thanks to @dy66 for opening #1602
